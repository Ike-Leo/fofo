{
    "project": "UCCP",
    "branchName": "ralph/storefront-api-v2",
    "description": "Storefront API v2 - Search, Categories, Order Status, Pagination & Filtering",
    "userStories": [
        {
            "id": "US-901",
            "title": "Add Product Search Query",
            "description": "As a storefront developer, I need a search endpoint to find products by name/description.",
            "acceptanceCriteria": [
                "Add 'search' query to convex/public/products.ts",
                "Search accepts: orgSlug, query (string), limit (optional, default 20)",
                "Search matches product name and description (case-insensitive)",
                "Returns same structure as products.list",
                "npm run typecheck passes"
            ],
            "priority": 1,
            "passes": true,
            "notes": "Implemented in convex/public/products.ts"
        },
        {
            "id": "US-902",
            "title": "Add HTTP Search Endpoint",
            "description": "As a storefront developer, I need an HTTP route for product search.",
            "acceptanceCriteria": [
                "Add GET /api/store/:orgSlug/products/search?q=<query>&limit=<n> route",
                "Route calls api.public.products.search",
                "Returns JSON array of matching products",
                "npm run typecheck passes"
            ],
            "priority": 2,
            "passes": true,
            "notes": "Implemented in convex/http.ts"
        },
        {
            "id": "US-903",
            "title": "Add Public Categories Query",
            "description": "As a storefront developer, I need to list categories for navigation.",
            "acceptanceCriteria": [
                "Create convex/public/categories.ts",
                "Add 'list' query: returns all categories for orgSlug",
                "Returns: _id, name, slug, parentId, position",
                "npm run typecheck passes"
            ],
            "priority": 3,
            "passes": true,
            "notes": "Created convex/public/categories.ts"
        },
        {
            "id": "US-904",
            "title": "Add Products by Category Query",
            "description": "As a storefront developer, I need to filter products by category.",
            "acceptanceCriteria": [
                "Add 'listByCategory' query to convex/public/products.ts",
                "Accepts: orgSlug, categorySlug",
                "Returns products where categoryId matches the category with that slug",
                "npm run typecheck passes"
            ],
            "priority": 4,
            "passes": true,
            "notes": "Implemented in convex/public/products.ts"
        },
        {
            "id": "US-905",
            "title": "Add Related Products Query",
            "description": "As a storefront developer, I need to show similar products on product pages.",
            "acceptanceCriteria": [
                "Add 'getRelated' query to convex/public/products.ts",
                "Accepts: orgSlug, productSlug, limit (default 4)",
                "Returns products in same category, excluding current product",
                "Falls back to random active products if no category match",
                "npm run typecheck passes"
            ],
            "priority": 5,
            "passes": true,
            "notes": "Implemented in convex/public/products.ts"
        },
        {
            "id": "US-906",
            "title": "Add HTTP Category Endpoints",
            "description": "As a storefront developer, I need HTTP routes for categories.",
            "acceptanceCriteria": [
                "Add GET /api/store/:orgSlug/categories route",
                "Add GET /api/store/:orgSlug/categories/:categorySlug/products route",
                "Add GET /api/store/:orgSlug/products/:productSlug/related route",
                "npm run typecheck passes"
            ],
            "priority": 6,
            "passes": true,
            "notes": "Implemented in convex/http.ts"
        },
        {
            "id": "US-907",
            "title": "Add Public Order Status Query",
            "description": "As a customer, I need to check my order status with order number and email.",
            "acceptanceCriteria": [
                "Create convex/public/orders.ts",
                "Add 'getStatus' query: accepts orgSlug, orderNumber, email",
                "Validates email matches order customerInfo.email",
                "Returns: orderNumber, status, paymentStatus, totalAmount, createdAt, items",
                "Returns null if not found or email mismatch",
                "npm run typecheck passes"
            ],
            "priority": 7,
            "passes": true,
            "notes": "Created convex/public/orders.ts with email verification"
        },
        {
            "id": "US-908",
            "title": "Add HTTP Order Status Endpoint",
            "description": "As a storefront developer, I need an HTTP route for order status lookup.",
            "acceptanceCriteria": [
                "Add GET /api/store/:orgSlug/orders/:orderNumber?email=<email> route",
                "Route calls api.public.orders.getStatus",
                "Returns order details or 404 if not found/unauthorized",
                "npm run typecheck passes"
            ],
            "priority": 8,
            "passes": true,
            "notes": "Implemented in convex/http.ts"
        },
        {
            "id": "US-909",
            "title": "Add Pagination to Product List",
            "description": "As a storefront developer, I need paginated product lists for large catalogs.",
            "acceptanceCriteria": [
                "Update products.list to accept: limit (default 20), cursor (optional)",
                "Return object with: products[], nextCursor (string|null), hasMore (boolean)",
                "Cursor-based pagination using _creationTime for stability",
                "npm run typecheck passes"
            ],
            "priority": 9,
            "passes": true,
            "notes": "Implemented in convex/public/products.ts"
        },
        {
            "id": "US-910",
            "title": "Add Filtering to Product List",
            "description": "As a storefront developer, I need to filter products by price and stock.",
            "acceptanceCriteria": [
                "Update products.list to accept optional filters: minPrice, maxPrice, inStockOnly",
                "Filter logic applied after query, before pagination",
                "inStockOnly: true filters to products with totalStock > 0",
                "npm run typecheck passes"
            ],
            "priority": 10,
            "passes": true,
            "notes": "Implemented in convex/public/products.ts"
        },
        {
            "id": "US-911",
            "title": "Update HTTP Products Endpoint for Pagination & Filters",
            "description": "As a storefront developer, I need query params for pagination and filtering.",
            "acceptanceCriteria": [
                "Update GET /api/store/:orgSlug/products to accept query params",
                "Params: limit, cursor, minPrice, maxPrice, inStockOnly",
                "Response includes: products, nextCursor, hasMore",
                "npm run typecheck passes"
            ],
            "priority": 11,
            "passes": true,
            "notes": "Implemented in convex/http.ts"
        },
        {
            "id": "US-912",
            "title": "Update Storefront API Documentation",
            "description": "As a developer, I need updated API docs reflecting all new endpoints.",
            "acceptanceCriteria": [
                "Update doc/storefront_api.md with all new endpoints",
                "Document search, categories, order status, pagination, filtering",
                "Include example requests and responses",
                "npm run typecheck passes"
            ],
            "priority": 12,
            "passes": true,
            "notes": "Updated doc/storefront_api.md"
        }
    ]
}